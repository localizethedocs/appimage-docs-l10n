

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>I have issues with Electron-based AppImages and their sandboxing &mdash; AppImage  文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=5111789f" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/appimage-docs-l10n/user-guide/troubleshooting/electron-sandboxing.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=7d86a446"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Packaging Guide" href="../../packaging-guide/index.html" />
    <link rel="prev" title="I get some errors related to something called &#34;FUSE&#34;" href="fuse.html" />
 
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            AppImage
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../run-appimages.html">Running AppImages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portable-mode.html">Using portable mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mac.html">AppImage for macOS switchers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Troubleshooting</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fuse.html">I get some errors related to something called &quot;FUSE&quot;</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">I have issues with Electron-based AppImages and their sandboxing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../packaging-guide/index.html">Packaging Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AppImage</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Troubleshooting</a></li>
      <li class="breadcrumb-item active">I have issues with Electron-based AppImages and their sandboxing</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/AppImage/docs.appimage.org/blob/master/source/user-guide/troubleshooting/electron-sandboxing.rst" class="fa fa-github"> 在 GitHub 上编辑</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="顺序式页面导航">
        <a href="fuse.html" class="btn btn-neutral float-left" title="I get some errors related to something called &#34;FUSE&#34;" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../../packaging-guide/index.html" class="btn btn-neutral float-right" title="Packaging Guide" accesskey="n">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="i-have-issues-with-electron-based-appimages-and-their-sandboxing">
<span id="ref-troubleshooting-electron"></span><h1>I have issues with Electron-based AppImages and their sandboxing<a class="headerlink" href="#i-have-issues-with-electron-based-appimages-and-their-sandboxing" title="Link to this heading"></a></h1>
<p>AppImages based on <a class="reference external" href="https://www.electron.build/">Electron</a> require the kernel to be configured in a certain way to allow for its sandboxing to work as intended (specifically, the kernel needs to be allowed to provide &quot;unprivileged namespaces&quot;). Many distributions come with this configured out of the box (like <a class="reference external" href="https://ubuntu.com">Ubuntu</a> prior to <a class="reference external" href="https://discourse.ubuntu.com/t/ubuntu-24-04-lts-noble-numbat-release-notes/39890#unprivileged-user-namespace-restrictions-15">24.04</a>), but some do not (for example <a class="reference external" href="https://debian.org">Debian</a>).</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Please note that the AppImage team does not provide any guarantees that enabling this feature is secure and safe. If in doubt, you need to contact your distribution first. If they enable those securely by default, all users can benefit from this feature.</p>
</div>
<section id="check-if-kernel-is-configured-correctly-already">
<h2>Check if kernel is configured correctly already<a class="headerlink" href="#check-if-kernel-is-configured-correctly-already" title="Link to this heading"></a></h2>
<p>To check if your distribution has unprivileged namespaces enabled, please run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sysctl</span> <span class="n">kernel</span><span class="o">.</span><span class="n">unprivileged_userns_clone</span>
<span class="n">kernel</span><span class="o">.</span><span class="n">unprivileged_userns_clone</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">1</span></code> means that the unprivileged namespaces are enabled already, and you do not have to take any action.
A <code class="docutils literal notranslate"><span class="pre">0</span></code> indicates that the feature is available, but not enabled at the moment. Please see the following sections on how to enable it.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The command does not need to be run as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</p>
</div>
</section>
<section id="configure-unprivileged-sandboxes">
<span id="ref-electron-sandboxing-configure-temporarily"></span><h2>Configure unprivileged sandboxes<a class="headerlink" href="#configure-unprivileged-sandboxes" title="Link to this heading"></a></h2>
<p>To temporarily enable unprivileged namespaces, you can run this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sysctl</span> <span class="o">-</span><span class="n">w</span> <span class="n">kernel</span><span class="o">.</span><span class="n">unprivileged_userns_clone</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>You can run the same command, swapping the <code class="docutils literal notranslate"><span class="pre">1</span></code> for a <code class="docutils literal notranslate"><span class="pre">0</span></code>, to disable this again.</p>
<p>To permanently enable the feature, it is recommended to create a new file in <code class="docutils literal notranslate"><span class="pre">/etc/sysctl.d/</span></code>. For your convenience, we have prepared the following command which creates the file on the fly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">kernel</span><span class="o">.</span><span class="n">unprivileged_userns_clone</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysctl</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">00</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">userns</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This command will take effect only on the next reboot. To change this on a running system, please refer to the <a class="reference internal" href="#ref-electron-sandboxing-configure-temporarily"><span class="std std-ref">previous section</span></a>.</p>
</div>
</section>
<section id="allow-electron-appimages-to-run-without-unprivileged-namespaces">
<h2>Allow Electron AppImages to run without unprivileged namespaces<a class="headerlink" href="#allow-electron-appimages-to-run-without-unprivileged-namespaces" title="Link to this heading"></a></h2>
<p>&#64;gergof made a tool that automatically applies the <cite>--no-sandbox</cite> flag when the <cite>unprivileged_userns_clone</cite> kernel feature is not enabled: <a class="reference external" href="https://www.npmjs.com/package/electron-builder-sandbox-fix">https://www.npmjs.com/package/electron-builder-sandbox-fix</a></p>
</section>
<section id="more-information-on-unprivileged-namespaces">
<h2>More information on unprivileged namespaces<a class="headerlink" href="#more-information-on-unprivileged-namespaces" title="Link to this heading"></a></h2>
<p>For more information on unprivileged namespaces, please see <a class="reference external" href="https://lwn.net/Articles/673597/">https://lwn.net/Articles/673597/</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="fuse.html" class="btn btn-neutral float-left" title="I get some errors related to something called &#34;FUSE&#34;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../../packaging-guide/index.html" class="btn btn-neutral float-right" title="Packaging Guide" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2018-2022, The AppImage project。
      <span class="commit">版本 <code>475547d</code>.
      </span></p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>